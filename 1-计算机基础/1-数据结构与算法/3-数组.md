# 数组

数组（Array）是一种线性表数据结构。

它用一组连续的内存空间，来存储相同类型的数据。

> 可以看出如 javascript 等动态类型语言中的数组，并不是真正的数组。参考 [深究 JavaScript 数组](https://juejin.im/entry/59ae664d518825244d207196)

## 一、线性表与非线性表

数据结构，按照数据之间的关系，可以分为 `线性表` 和 `非线性表`。

### 1.1 线性表

线性表，顾名思义，表示像一条线一样的数据结构。

线性表上的数据之间是前后关系，如 `数组`、`链表`、`队列`、`栈` 。

### 1.2 非线性表

与线性表相对立的，就是非线性表，数据之间不是简单的前后关系，如 `树`、`图`、`堆` 。

## 二、内存空间与内存地址

参考资料：

> [内存地址存储，内存空间](https://blog.csdn.net/weixin_31449201/article/details/80298099)

> [内存地址与内存空间](https://www.cnblogs.com/Lanht/p/10780364.html)

### 2.1 基本概念

（1）位：指二进制位，单位 b（bit，比特），是计算机存储的最小单位。

（2）字节：8 个二进制位为 1 个字节，单位 B（Byte，字节），是计算机中表示信息含义的最小单位。

（3）内存地址：计算机将内存按字节进行划分，分为一个个内存空间（即一个内存空间占一个字节大小），并给每个空间进行编号，即内存地址。

（4）内存块：一般把一个以上连续的内存空间，称为内存块。

## 三、数组中元素的访问、插入和删除

数组采用的是连续的内存空间，并存储的是相同类型的数据，所有有以下优缺点：

* 优点：可以随机访问数组中的元素（随机访问，即可以根据下标从数组中任意元素地址开始访问，而不是必须从开始地址进行）
* 缺点：在插入、删除数组中的元素时，为保证内存空间的连续性，需要大量移动数组中的元素

所以数组的性能：访问和修改 > 插入和删除 。

### 3.1 访问

创建数组时，计算机会分配连续的内存空间，而内存空间都含有一个编号（即内存地址），假设首地址为 `base_address`。

由于数据类型相同，所以每个内存空间的大小是一样的，假设为占 `type_size` 个字节，参考 [内存地址与内存空间](https://blog.csdn.net/weixin_31449201/article/details/80298099)。

在访问数组元素时，只要给出下标 `i`，计算机就可以通过如下公式，计算出元素的内存地址 `address`：

```
寻址公式：address = base_address + i * type_size
```

得到地址后，就可以得到对应的数据了，时间复杂度为 `O(1)` 。

从公式可知，下标 `i` 准确来说为偏移量，所以多数语言（如 `C`、`Java`） 数组下标从 `0` 开始，可以减少一次减一操作。

> 1. 数组下标从 `0` 开始也有历史原因，最开始是 C 语言采用的下标从 0 开始，后续语言也就跟着一起了，方便学习。  
> 2. 数组下标在其他语言中也有从 `1` 开始的，如 `Matlab`、`lua`。而且 `Python` 还支持负数的下标。 
> 3. 小心数组下标越界

### 3.2 插入

假设数组的长度为 `n`，需要在下标 `k` 的位置插入一个元素，则下标为 `k` ~ `n-1` 位置的元素需要依次向后移动一位。

根据平均情况时间复杂度，可得时间复杂度为：`(0+1+2+...+n)/n` => `O(n)`。

小技巧：

> 1. 如果数组中的元素需要保持插入前后的顺序，则需要依次移动元素。
> 2. 如果数组中的元素不需要保持顺序，则插入时，可以进行替换操作，把被替换元素放到数组末端。

### 3.3 删除

删除操作与插入操作类似，当删除下标为 `k` 的元素时，需要将下标为 `k` ~ `n-1` 位置的元素需要依次向前移动一位。

可知平均情况时间复杂度也为 `O(n)` 。

小技巧：

> 1. 在删除多个元素时，可以先标记为删除状态，等数组空间不够时，再一次删除，避免移动多次元素。