# 跳表

在有序数据集合中查找元素，可以使用 [二分查找](09-二分查找.md) 算法，时间复杂度为 `O(logn)`。

二分查找算法的底层是依赖于数组的随机访问特性的，所以需要数据存储在有序数组中。

当数据存储在有序链表中时，二分查找算法无法使用，这时候就需要用到 `跳表`。

## 一、什么是跳表？

跳表（Skip list），又称 `跳跃表` 或 `跳跃链表`，是一种基于多层链表的动态数据结构，是链表的一种扩展。

当数据存储在有序的单向链表中时，要查找一个元素，只能从头到尾进行遍历，查找效率低，时间复杂度为 `O(n)`;

为了提高有序链表中元素的查找效率，就有了 `跳表` 这种数据结构，如下：

![跳表](img/skip-list.jpg)

如上图，从原始链表中每两个元素取一个元素组成新的链表（称为 `索引`），这样一层一层地组成新链表，总体形成跳表。

这样，在查找原始链表的元素时，根据上级链表的数据进行判断，所需要遍历的链表结点就变少了，时间复杂度为 `O(logn)`。

这种做法很类似 `二分查找` 算法，只是这个是从数据结构上做的处理，把中间值事先提取出来，利用了 `以空间换时间` 的思想。

## 二、跳表高效的插入和删除

跳表使得从链表中查找一个元素的时间复杂度降低为了 `O(logn)`。

而链表的插入和删除操作，单纯的执行只需要简单的几步，时间复杂度为 `O(1)` ，加上找到对应的元素，时间复杂度就为 `O(logn)`。

## 三、跳表索引的动态更新

当我们不停向跳表中插入、修改或删除数据时，我们也需要更新对应的索引。

采用的方式是，随机函数生成要更新的层级，然后将对应的数据在相应层级的链表中进行更新。

随机函数的选择很有讲究，从概率上来讲，能够保证跳表的索引大小和数据大小平衡性，不至于性能过度退化。